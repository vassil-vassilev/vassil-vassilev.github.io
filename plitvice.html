<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ—Ç–æ –ü–ª–∏—Ç–≤–∏—Ü–µ –∏ –ó–∞–¥–∞—Ä üá≠üá∑</title>

    <!-- Leaflet Map CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #0ea5e9;
            --dark: #0f172a;
            --light: #f8fafc;
            --accent: #f59e0b;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            color: var(--dark);
            background-color: white;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* --- LEFT PANEL: CONTENT (50%) --- */
        #content-panel {
            width: 50%;
            height: 100vh;
            overflow-y: auto;
            background: white;
            box-shadow: 5px 0 20px rgba(0,0,0,0.1);
            z-index: 2;
            position: relative;
        }

        .hero-header {
            background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('https://plus.unsplash.com/premium_photo-1661883801442-3fdb21a619f1?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 5rem 3rem;
            text-align: center;
        }

        .hero-header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            margin: 0;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        .hero-header p {
            font-size: 1.1rem;
            margin-top: 10px;
            font-weight: 300;
        }

        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .stat-pill {
            background: rgba(255,255,255,0.25);
            backdrop-filter: blur(5px);
            padding: 5px 15px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .itinerary-container {
            padding: 3rem;
            max-width: 800px;
            margin: 0 auto;
        }

        /* --- DAY CARD DESIGN --- */
        .day-card {
            background: white;
            border-radius: 16px;
            margin-bottom: 3rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            border: 1px solid #e2e8f0;
            overflow: hidden;
        }

        .day-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            border-color: var(--primary);
        }

        .day-card.active {
            border: 2px solid var(--primary);
            ring: 4px solid rgba(14, 165, 233, 0.1);
        }

        .card-image-banner {
            height: 250px;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .day-tag {
            position: absolute;
            top: 20px;
            left: 20px;
            background: var(--primary);
            color: white;
            padding: 5px 12px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .card-body {
            padding: 25px;
        }

        .card-header-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .card-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            color: var(--dark);
            margin: 0;
            flex: 1;
        }

        .drive-badge {
            display: flex;
            align-items: center;
            gap: 6px;
            background: #f1f5f9;
            color: #64748b;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            white-space: nowrap;
            margin-left: 15px;
        }

        .card-desc {
            color: #475569;
            line-height: 1.7;
            font-size: 0.95rem;
        }

        /* --- THUMBNAIL ROW --- */
        .thumb-row {
            display: flex;
            gap: 12px;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #f1f5f9;
            overflow-x: auto;
            padding-bottom: 5px;
        }

        .thumb-img {
            width: 70px;
            height: 70px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
            flex-shrink: 0;
        }

        .thumb-img:hover {
            transform: scale(1.05);
            border-color: var(--primary);
            opacity: 0.9;
        }

        /* --- RIGHT PANEL: MAP (50%) --- */
        #map {
            width: 50%;
            height: 100vh;
        }

        /* --- CUSTOM MAP MARKERS --- */
        .number-icon {
            background-color: var(--dark);
            color: white;
            border: 3px solid white;
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            font-weight: 700;
            font-size: 18px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.2s ease;
        }

        .number-icon:hover, .number-icon.active-marker {
            background-color: var(--primary);
            transform: scale(1.2);
        }

        /* --- LIGHTBOX MODAL --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.95);
            backdrop-filter: blur(10px);
            justify-content: center;
            align-items: center;
        }

        .modal-content-wrapper {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .modal-img {
            max-height: 80vh;
            max-width: 100%;
            border-radius: 4px;
            box-shadow: 0 5px 30px rgba(0,0,0,0.5);
            object-fit: contain;
        }

        .modal-caption-text {
            color: white;
            margin-top: 15px;
            font-family: 'Playfair Display', serif;
            font-size: 1.2rem;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.1);
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
            font-size: 2rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            user-select: none;
        }

        .nav-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-50%) scale(1.1);
        }

        .prev-btn { left: -80px; }
        .next-btn { right: -80px; }

        .close-btn {
            position: absolute;
            top: -50px;
            right: 0;
            color: white;
            font-size: 3rem;
            cursor: pointer;
            line-height: 1;
            transition: transform 0.2s;
        }

        .close-btn:hover { transform: scale(1.1); color: var(--accent); }

        /* --- MOBILE RESPONSIVE --- */
        @media (max-width: 768px) {
            body { flex-direction: column-reverse; }
            #content-panel { width: 100%; height: 70vh; }
            #map { width: 100%; height: 30vh; }
            .hero-header { padding: 2rem 1rem; }
            .hero-header h1 { font-size: 2rem; }
            .itinerary-container { padding: 1.5rem; }
            .day-card { margin-bottom: 1.5rem; }
            .card-image-banner { height: 180px; }

            .prev-btn { left: 10px; top: auto; bottom: 50%; }
            .next-btn { right: 10px; top: auto; bottom: 50%; }
            .close-btn { top: 10px; right: 20px; font-size: 2.5rem; }
        }
    </style>
</head>
<body>

    <!-- Left Panel: Content -->
    <div id="content-panel">
        <div class="hero-header">
            <h1>–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ—Ç–æ –ü–ª–∏—Ç–≤–∏—Ü–µ –∏ –ó–∞–¥–∞—Ä üá≠üá∑</h1>
            <p>6 –î–Ω–∏ ‚Ä¢ –í–æ–¥–æ–ø–∞–¥–∏ ‚Ä¢ –û—Å—Ç—Ä–æ–≤–∏ —Å –ª–æ–¥–∫–∞ ‚Ä¢ –ó–∞–ª–µ–∑–∏</p>
            <div class="stats-bar">
                <span class="stat-pill">üöó ~16—á –®–æ—Ñ–∏—Ä–∞–Ω–µ</span>
                <span class="stat-pill">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –ü–æ–¥—Ö–æ–¥—è—â–æ –∑–∞ –¥–µ—Ü–∞</span>
                <span class="stat-pill">üá≠üá∑ –•—ä—Ä–≤–∞—Ç–∏—è</span>
            </div>
        </div>

        <div class="itinerary-container" id="itinerary-list">
            <!-- JS will inject cards here -->
        </div>
    </div>

    <!-- Right Panel: Map -->
    <div id="map"></div>

    <!-- Lightbox Modal -->
    <div id="photoModal" class="modal">
        <div class="modal-content-wrapper">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <button class="nav-btn prev-btn" onclick="moveSlide(-1)">&#10094;</button>
            <img id="lightbox-img" class="modal-img" src="">
            <div id="lightbox-caption" class="modal-caption-text"></div>
            <button class="nav-btn next-btn" onclick="moveSlide(1)">&#10095;</button>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <script>
        // --- DATA ---
        const tripData = [
            {
                day: "–î–µ–Ω 1",
                title: "–°–æ—Ñ–∏—è ‚Üí –ë–µ–ª–≥—Ä–∞–¥ ‚Üí –°–ª–∞–≤–æ–Ω—Å–∫–∏ –ë—Ä–æ–¥",
                driveTime: "6-7 —á–∞—Å–∞",
                desc: "–ó–∞–ø–æ—á–≤–∞–º–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ—Ç–æ —Å –ø–æ—á–∏–≤–∫–∞ –≤ <b>–ë–µ–ª–≥—Ä–∞–¥</b>. –©–µ –ø–∞—Ä–∫–∏—Ä–∞–º–µ –¥–æ –∫—Ä–µ–ø–æ—Å—Ç—Ç–∞ –ö–∞–ª–µ–º–µ–≥–¥–∞–Ω, –∫—ä–¥–µ—Ç–æ –¥–µ—Ü–∞—Ç–∞ –º–æ–≥–∞—Ç –¥–∞ —Ä–∞–∑–≥–ª–µ–¥–∞—Ç <b>–ü–∞—Ä–∫–∞ —Å –¥–∏–Ω–æ–∑–∞–≤—Ä–∏</b> –∏ <b>–ó–æ–æ–ø–∞—Ä–∫–∞</b> —Ç–æ—á–Ω–æ –∑–∞–¥ —Å—Ä–µ–¥–Ω–æ–≤–µ–∫–æ–≤–Ω–∏—Ç–µ —Å—Ç–µ–Ω–∏. –°–ª–µ–¥ –∫–∞—Ç–æ –≤–∏–¥–∏–º —Å–ª–∏–≤–∞–Ω–µ—Ç–æ –Ω–∞ —Ä–µ–∫–∞ –°–∞–≤–∞ –≤ –î—É–Ω–∞–≤, —Å–µ –æ—Ç–ø—Ä–∞–≤—è–º–µ –∫—ä–º <b>–°–ª–∞–≤–æ–Ω—Å–∫–∏ –ë—Ä–æ–¥</b>, –∑–∞ –¥–∞ –ø—Ä–µ–Ω–æ—â—É–≤–∞–º–µ –±–ª–∏–∑–æ –¥–æ –º–∞—Å–∏–≤–Ω–∞ –∑–≤–µ–∑–¥–æ–æ–±—Ä–∞–∑–Ω–∞ –∫—Ä–µ–ø–æ—Å—Ç –æ—Ç 18-—Ç–∏ –≤–µ–∫.",
                coords: [44.8236, 20.4503], // Belgrade focused
                zoom: 7,
                bannerImg: "https://bookaweb.s3.eu-central-1.amazonaws.com/media/29689/kalemegdanska-tvrdjava-4.jpg",
                gallery: [
                    { src: "https://bookaweb.s3.eu-central-1.amazonaws.com/media/29689/kalemegdanska-tvrdjava-4.jpg", cap: "–ë–µ–ª–≥—Ä–∞–¥—Å–∫–∞—Ç–∞ –∫—Ä–µ–ø–æ—Å—Ç (–ö–∞–ª–µ–º–µ–≥–¥–∞–Ω) —Å –∏–∑–≥–ª–µ–¥ –∫—ä–º —Ä–µ–∫–∞—Ç–∞." },
                    { src: "https://tzbpz.hr/wp-content/uploads/2022/02/hero-festung.jpg", cap: "–ö—Ä–µ–ø–æ—Å—Ç—Ç–∞ –≤ –°–ª–∞–≤–æ–Ω—Å–∫–∏ –ë—Ä–æ–¥ (–ù–∞—à–∞—Ç–∞ —Å–ø–∏—Ä–∫–∞ –∑–∞ –Ω–æ—â—É–≤–∫–∞)." }
                ]
            },
            {
                day: "–î–µ–Ω 2",
                title: "–í–æ–¥–æ–ø–∞–¥–∏: –†–∞—Å—Ç–æ–∫–µ –∏ –ü–ª–∏—Ç–≤–∏—Ü–µ",
                driveTime: "3 —á–∞—Å–∞",
                desc: "–ú–∞–≥–∏—è—Ç–∞ –∑–∞–ø–æ—á–≤–∞. –ü—ä—Ä–≤–∞ —Å–ø–∏—Ä–∫–∞: <b>–†–∞—Å—Ç–æ–∫–µ</b>, –ø—Ä–∏–∫–∞–∑–Ω–æ —Å–µ–ª–æ, –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ <i>–≤—ä—Ä—Ö—É</i> –≤–æ–¥–æ–ø–∞–¥–∏ –∏ –≤–æ–¥–µ–Ω–∏—Ü–∏. –°–ª–µ–¥ —Ç–æ–≤–∞, –æ—Å–Ω–æ–≤–Ω–æ—Ç–æ —Å—ä–±–∏—Ç–∏–µ: <b>–ù–∞—Ü–∏–æ–Ω–∞–ª–µ–Ω –ø–∞—Ä–∫ –ü–ª–∏—Ç–≤–∏—à–∫–∏ –µ–∑–µ—Ä–∞</b>. –©–µ –≤–∑–µ–º–µ–º –µ–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ—Ç–æ –∫–æ—Ä–∞–±—á–µ –ø—Ä–µ–∑ –∏–∑—É–º—Ä—É–¥–µ–Ω–æ—Ç–æ –µ–∑–µ—Ä–æ –ö–æ–∑—è–∫ –∏ —â–µ —Å–µ —Ä–∞–∑—Ö–æ–¥–∏–º –ø–æ –¥—ä—Ä–≤–µ–Ω–∏—Ç–µ –ø—ä—Ç–µ–∫–∏ —Ç–æ—á–Ω–æ –¥–æ –ì–æ–ª–µ–º–∏—è –≤–æ–¥–æ–ø–∞–¥. –¢–æ–≤–∞ –µ —Ä–∞–π –ø–æ–¥ –∑–∞–∫—Ä–∏–ª–∞—Ç–∞ –Ω–∞ –Æ–ù–ï–°–ö–û.",
                coords: [44.9026, 15.6094],
                zoom: 8,
                bannerImg: "https://www.citypal.me/storage/images/1713173771.3898-visit-the-biggest-waterfall-on-plitvice-lakes.jpg",
                gallery: [
                    { src: "https://www.citypal.me/storage/images/1713173771.3898-visit-the-biggest-waterfall-on-plitvice-lakes.jpg", cap: "–ü–ª–∏—Ç–≤–∏—à–∫–∏ –µ–∑–µ—Ä–∞: –ì–æ–ª–µ–º–∏—è—Ç –≤–æ–¥–æ–ø–∞–¥ (Veliki Slap)." },
                    { src: "https://static.saltinourhair.com/wp-content/uploads/2023/08/21155029/croatia-rastoke-9.jpg", cap: "–ó–µ–ª–µ–Ω–∏–Ω–∞ –∏ –≤–æ–¥–æ–ø–∞–¥–∏ –æ–∫–æ–ª–æ –†–∞—Å—Ç–æ–∫–µ." },
                    { src: "https://images.squarespace-cdn.com/content/v1/665604881782aa23525c3d06/1717530041577-A9IPWAYPN5DZQPQGDML6/Tourist-at-Pltivice-Lakes-National-Park-Croatia.jpg", cap: "–î—ä—Ä–≤–µ–Ω–∏—Ç–µ –ø—ä—Ç–µ–∫–∏ –Ω–∞–¥ –∫—Ä–∏—Å—Ç–∞–ª–Ω–æ —á–∏—Å—Ç–∏—Ç–µ –µ–∑–µ—Ä–∞." }
                ]
            },
            {
                day: "–î–µ–Ω 3",
                title: "–¢–µ—Å–ª–∞, –°–ª—ä–Ω—Ü–µ –∏ –ú–æ—Ä–µ: –ö—ä–º –ó–∞–¥–∞—Ä",
                driveTime: "2 —á–∞—Å–∞",
                desc: "–ö—Ä–∞—Ç–∫–∞ —Å–ø–∏—Ä–∫–∞ –≤ <b>–°–º–∏–ª—è–Ω</b>, –∑–∞ –¥–∞ –≤–∏–¥–∏–º —Ä–æ–¥–Ω–∞—Ç–∞ –∫—ä—â–∞ –Ω–∞ –ù–∏–∫–æ–ª–∞ –¢–µ—Å–ª–∞ –∏ –Ω–∞—É—á–Ω–∞—Ç–∞ –ø–ª–æ—â–∞–¥–∫–∞. –°–ª–µ–¥ —Ç–æ–≤–∞ –∫—ä–º –∫—Ä–∞–π–±—Ä–µ–∂–∏–µ—Ç–æ! –í <b>–ó–∞–¥–∞—Ä</b> —â–µ –ø–æ–ø–ª—É–≤–∞–º–µ –Ω–∞ –ø–ª–∞–∂ –ö–æ–ª–æ–≤–æ—Ä–µ –∏ —â–µ —Å–µ –æ—Ç–ø—Ä–∞–≤–∏–º –∫—ä–º –°—Ç–∞—Ä–∏—è –≥—Ä–∞–¥ –∑–∞ —Å–≤–µ—Ç–æ–≤–Ω–æ–∏–∑–≤–µ—Å—Ç–Ω–∏—è –∑–∞–ª–µ–∑. <b>–ú–æ—Ä—Å–∫–∏—è—Ç –æ—Ä–≥–∞–Ω</b> —Å–≤–∏—Ä–∏ –º—É–∑–∏–∫–∞, –∑–∞–¥–≤–∏–∂–≤–∞–Ω–∞ –æ—Ç –≤—ä–ª–Ω–∏—Ç–µ, –¥–æ–∫–∞—Ç–æ <b>–ü–æ–∑–¥—Ä–∞–≤ –∫—ä–º —Å–ª—ä–Ω—Ü–µ—Ç–æ</b> –æ—Å–≤–µ—Ç—è–≤–∞ –ø–æ–¥–∞, –∑–∞ –¥–∞ —Ç–∞–Ω—Ü—É–≤–∞—Ç –¥–µ—Ü–∞—Ç–∞.",
                coords: [44.1194, 15.2314],
                zoom: 8,
                bannerImg: "https://www.fiestaybullshit.com/wp-content/uploads/2021/07/Fest.jpg",
                gallery: [
                    { src: "https://www.fiestaybullshit.com/wp-content/uploads/2021/07/Fest.jpg", cap: "–ó–∞–¥–∞—Ä: –ò–∑–≤–µ—Å—Ç–Ω–∏—è—Ç –∑–∞–ª–µ–∑ –¥–æ –ú–æ—Ä—Å–∫–∏—è –æ—Ä–≥–∞–Ω." },
                    { src: "https://ichef.bbci.co.uk/images/ic/1200x675/p07qnmmw.jpg", cap: "–°—Ç—ä–ø–∞–ª–∞—Ç–∞ –Ω–∞ –ú–æ—Ä—Å–∫–∏—è –æ—Ä–≥–∞–Ω, –∫—ä–¥–µ—Ç–æ –æ–∫–µ–∞–Ω—ä—Ç —Å—ä–∑–¥–∞–≤–∞ –º—É–∑–∏–∫–∞." },
                    { src: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b3/Roman_Forum_in_Zadar%2C_Croatia_%2848607823862%29.jpg/1280px-Roman_Forum_in_Zadar%2C_Croatia_%2848607823862%29.jpg", cap: "–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞—Ç–∞ –Ω–∞ –°—Ç–∞—Ä–∏—è –≥—Ä–∞–¥ –≤ –ó–∞–¥–∞—Ä." },
                    { src: "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/18/01/ce/03/statue-of-nikola-tesla.jpg?w=1200&h=1200&s=1", cap: "–ú–µ–º–æ—Ä–∏–∞–ª –ù–∏–∫–æ–ª–∞ –¢–µ—Å–ª–∞: –í —á–µ—Å—Ç –Ω–∞ –Ω–∞—É–∫–∞—Ç–∞." }
                ]
            },
            {
                day: "–î–µ–Ω 4",
                title: "–û—Å—Ç—Ä–æ–≤–∏ —Å –ª–æ–¥–∫–∞: –£–≥–ª–∞–Ω –∏ –û—à–ª—è–∫ (Speedboat!)",
                driveTime: "0 —á–∞—Å–∞",
                desc: "–î–Ω–µ—à–Ω–∏—è—Ç –¥–µ–Ω –µ –∑–∞ <b>–≥–æ–ª–µ–º–∏—è –¥–µ—Ç—Å–∫–∏ —Ö–∏—Ç</b> ‚Äî –ª–æ–¥–∫–∞! –¢—Ä—ä–≥–≤–∞–º–µ –æ—Ç –ø—Ä–∏—Å—Ç–∞–Ω–∏—â–µ—Ç–æ –Ω–∞ <b>–ó–∞–¥–∞—Ä</b> —Å –º–∞–ª–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–Ω–∞ –ª–æ–¥–∫–∞ (10‚Äì12 –¥—É—à–∏), –ø—Ä–∞–≤–∏–º 2‚Äì3 –∫—Ä–∞—Ç–∫–∏ —Å–ø–∏—Ä–∫–∏ –∑–∞ <b>–ø–ª—É–≤–∞–Ω–µ</b>, <b>—à–Ω–æ—Ä—Ö–µ–ª</b> –∏ —Ä–∞–∑—Ö–æ–¥–∫–∞ –∏–∑ –º–∞–ª–∫–∏ –æ—Å—Ç—Ä–æ–≤–Ω–∏ —Å–µ–ª—Ü–∞. –ù–∞–π-—á–µ—Å—Ç–∏—è—Ç –º–∞—Ä—à—Ä—É—Ç –µ –∫—ä–º –æ—Å—Ç—Ä–æ–≤ <b>–£–≥–ª–∞–Ω</b> –∏ –º–∏–Ω–∏–∞—Ç—é—Ä–Ω–∏—è <b>–û—à–ª—è–∫</b>. –°–ª–µ–¥–æ–±–µ–¥: —Å–ª–∞–¥–æ–ª–µ–¥ –≤ –°—Ç–∞—Ä–∏—è –≥—Ä–∞–¥ –∏ –æ—â–µ –º–æ—Ä–µ.",
                coords: [44.1152, 15.2242],
                zoom: 7,
                bannerImg: "https://media-cdn.tripadvisor.com/media/attractions-splice-spp-720x480/13/b9/03/73.jpg",
                gallery: [
                    { src: "https://media-cdn.tripadvisor.com/media/attractions-splice-spp-720x480/13/b9/03/73.jpg", cap: "–°–∫–æ—Ä–æ—Å—Ç–Ω–∞ –ª–æ–¥–∫–∞ –∏ –∞–¥—Ä–µ–Ω–∞–ª–∏–Ω ‚Äî —Ñ–∞–≤–æ—Ä–∏—Ç—ä—Ç –Ω–∞ –¥–µ—Ü–∞—Ç–∞." },
                    { src: "https://croatia.hr/cmsmedia/Destinacija/Otoci/ugljan--ivan-sardi.jpg", cap: "–£–≥–ª–∞–Ω: —Å–ø–æ–∫–æ–π–Ω–∏ –∑–∞–ª–∏–≤–∏ –∏ —Å–µ–ª–∏—â–∞ –∑–∞ —Ä–∞–∑—Ö–æ–¥–∫–∞." },
                    { src: "https://framerusercontent.com/images/mpvN4dkOB3Kzxev4fnLjh2XIPs8.jpg?scale-down-to=2048", cap: "–û—à–ª—è–∫: –º–∏–Ω–∏ –æ—Å—Ç—Ä–æ–≤—á–µ –∑–∞ 30‚Äì40 –º–∏–Ω –æ–±–∏–∫–æ–ª–∫–∞ –ø–µ—à–∞." },
                    { src: "https://cdn.getyourguide.com/image/format=auto,fit=contain,gravity=center,quality=60,width=1440,height=650,dpr=1/tour_img/45c479c555bb25ea48a88e4c9e97c8065ec9438a6cd2dbac575e040073ae61ed.jpg", cap: "–ü–ª—É–≤–∞–Ω–µ –∏ —à–Ω–æ—Ä—Ö–µ–ª –≤ —Ç—é—Ä–∫–æ–∞–∑–µ–Ω–∏ –≤–æ–¥–∏ (UV —Ç–µ–Ω–∏—Å–∫–∏ –ø—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–∏)." }
                ]
            },
            {
                day: "–î–µ–Ω 5",
                title: "–õ–µ–Ω–∏–≤–∞ —Å—É—Ç—Ä–∏–Ω –∏ –ò—Å—Ç–æ—Ä–∏—è: –ö—ä–º –í–∏–Ω–∫–æ–≤—Ü–∏",
                driveTime: "4 —á–∞—Å–∞",
                desc: "–î–Ω–µ—Å –Ω–µ –±—ä—Ä–∑–∞–º–µ. –ù–∞—Å–ª–∞–∂–¥–∞–≤–∞–º–µ —Å–µ –Ω–∞ –±–∞–≤–Ω–æ –∫–∞—Ñ–µ –Ω–∞ –†–∏–º—Å–∫–∏—è —Ñ–æ—Ä—É–º –≤ –ó–∞–¥–∞—Ä –∏–ª–∏ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–æ –ø–æ—Ç–∞–ø—è–Ω–µ –≤ –º–æ—Ä–µ—Ç–æ. –°–ª–µ–¥–æ–±–µ–¥ —à–æ—Ñ–∏—Ä–∞–º–µ –æ–±—Ä–∞—Ç–Ω–æ –∫—ä–º –≥—Ä–∞–Ω–∏—Ü–∞—Ç–∞, —Å–ø–∏—Ä–∞–π–∫–∏ –∑–∞ –Ω–æ—â—É–≤–∫–∞ –≤—ä–≤ <b>–í–∏–Ω–∫–æ–≤—Ü–∏</b>, –Ω–∞–π-—Å—Ç–∞—Ä–∏—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –Ω–∞—Å–µ–ª–µ–Ω –≥—Ä–∞–¥ –≤ –ï–≤—Ä–æ–ø–∞. –¢–∏—Ö, –±–µ–∑–æ–ø–∞—Å–µ–Ω –∏ –∏–¥–µ–∞–ª–µ–Ω –∑–∞ –ø—Ä–µ–∑–∞—Ä–µ–∂–¥–∞–Ω–µ.",
                coords: [45.2891, 18.8043],
                zoom: 7,
                bannerImg: "https://lp-cms-production.imgix.net/2019-06/a700394ac88d6fb87f5196add93e641c-roman-forum.jpg",
                gallery: [
                    { src: "https://lp-cms-production.imgix.net/2019-06/a700394ac88d6fb87f5196add93e641c-roman-forum.jpg", cap: "–°—É—Ç—Ä–∏–Ω –Ω–∞ –†–∏–º—Å–∫–∏—è —Ñ–æ—Ä—É–º –≤ –ó–∞–¥–∞—Ä." },
                    { src: "https://thumbs.dreamstime.com/b/center-vinkovci-town-croatia-september-63009814.jpg", cap: "–ü–µ—à–µ—Ö–æ–¥–Ω–∏—è—Ç —Ü–µ–Ω—Ç—ä—Ä –Ω–∞ –í–∏–Ω–∫–æ–≤—Ü–∏." }
                ]
            },
            {
                day: "–î–µ–Ω 6",
                title: "–í–∫—É—Å—ä—Ç –Ω–∞ –ë–∞–ª–∫–∞–Ω–∏—Ç–µ: –û–±—Ä–∞—Ç–Ω–æ –∫—ä–º –°–æ—Ñ–∏—è",
                driveTime: "5.5-6 —á–∞—Å–∞",
                desc: "–§–∏–Ω–∞–ª–Ω–∞—Ç–∞ –ø—Ä–∞–≤–∞! –ü—Ä–µ–∫—ä—Å–≤–∞–º–µ –ø—ä—Ç—É–≤–∞–Ω–µ—Ç–æ –≤ <b>–ù–∏—à, –°—ä—Ä–±–∏—è</b> –∑–∞ –ª–µ–≥–µ–Ω–¥–∞—Ä–µ–Ω –æ–±—è–¥. –©–µ —Ö–∞–ø–Ω–µ–º –ø—Ä–æ—á—É—Ç–∞—Ç–∞ —Å—Ä—ä–±—Å–∫–∞ —Å–∫–∞—Ä–∞ (—Ä–æ—â–∏–ª) –±–ª–∏–∑–æ –¥–æ –∫—Ä–µ–ø–æ—Å—Ç—Ç–∞ –ø—Ä–µ–¥–∏ –ø–æ—Å–ª–µ–¥–Ω–æ—Ç–æ –ª–µ–∫–æ —à–æ—Ñ–∏—Ä–∞–Ω–µ –æ–±—Ä–∞—Ç–Ω–æ –∫—ä–º –°–æ—Ñ–∏—è. –©–µ —Å–∏ –±—ä–¥–µ–º —É –¥–æ–º–∞ –≤–µ—á–µ—Ä—Ç–∞, —É–º–æ—Ä–µ–Ω–∏, –Ω–æ –ø—ä–ª–Ω–∏ —Å—ä—Å —Å–ø–æ–º–µ–Ω–∏.",
                coords: [43.3209, 21.8958],
                zoom: 7,
                bannerImg: "https://www.ekapija.com/thumbs/niska_tvrdjava_060323_tw1024.jpg",
                gallery: [
                    { src: "https://www.ekapija.com/thumbs/niska_tvrdjava_060323_tw1024.jpg", cap: "–ü–æ—Ä—Ç–∞—Ç–∞ –Ω–∞ –ù–∏—à–∫–∞—Ç–∞ –∫—Ä–µ–ø–æ—Å—Ç." }
                ]
            }
        ];

        // --- MAP INITIALIZATION ---
        const map = L.map('map').setView([44.5, 19.0], 6);
        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '¬© OpenStreetMap contributors',
            maxZoom: 19
        }).addTo(map);

        const markers = [];

        // Draw Route Line
        const routePoints = [
            [42.6977, 23.3219], // Sofia
            [44.8236, 20.4503], // Belgrade
            [45.1601, 18.0156], // Slavonski Brod
            [44.9026, 15.6094], // Plitvice
            [44.1194, 15.2314], // Zadar
            [44.1194, 15.2314], // Zadar (extra day)
            [45.2891, 18.8043], // Vinkovci
            [43.3209, 21.8958], // Nis
            [42.6977, 23.3219]  // Sofia
        ];

        L.polyline(routePoints, {
            color: '#0ea5e9',
            weight: 5,
            dashArray: '10, 15',
            opacity: 0.8,
            lineCap: 'round'
        }).addTo(map);

        // --- RENDER CONTENT ---
        const container = document.getElementById('itinerary-list');

        tripData.forEach((item, index) => {
            // 1. Create Card
            const card = document.createElement('div');
            card.className = 'day-card';
            card.id = `card-${index}`;

            // Build Thumbnail Row
            let thumbHtml = '<div class="thumb-row">';
            item.gallery.forEach((photo, imgIdx) => {
                thumbHtml += `<img src="${photo.src}" class="thumb-img" onclick="openLightbox(${index}, ${imgIdx}, event)" alt="Thumb">`;
            });
            thumbHtml += '</div>';

            card.innerHTML = `
                <div class="card-image-banner" style="background-image: url('${item.bannerImg}');">
                    <div class="day-tag">${item.day}</div>
                </div>
                <div class="card-body">
                    <div class="card-header-row">
                        <h3 class="card-title">${item.title}</h3>
                        <div class="drive-badge">
                            <!-- Car Icon -->
                            <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1"></path>
                            </svg>
                            ${item.driveTime}
                        </div>
                    </div>
                    <div class="card-desc">${item.desc}</div>
                    ${thumbHtml}
                </div>
            `;

            // Interaction
            card.addEventListener('click', () => {
                activateStop(index);
            });

            container.appendChild(card);

            // 2. Create Map Marker
            const numberIcon = L.divIcon({
                className: 'number-icon',
                html: index + 1,
                iconSize: [44, 44],
                iconAnchor: [22, 44],
                popupAnchor: [0, -44]
            });

            const marker = L.marker(item.coords, { icon: numberIcon }).addTo(map);
            marker.on('click', () => {
                // Scroll card into view
                const targetCard = document.getElementById(`card-${index}`);
                targetCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                activateStop(index);
            });

            markers.push({marker, coords: item.coords, zoom: item.zoom});
        });

        function activateStop(index) {
            // UI Updates
            document.querySelectorAll('.day-card').forEach(c => c.classList.remove('active'));
            document.getElementById(`card-${index}`).classList.add('active');

            document.querySelectorAll('.number-icon').forEach(i => i.classList.remove('active-marker'));

            // Map Move
            const data = markers[index];
            map.flyTo(data.coords, data.zoom, { duration: 1.5 });
        }

        // --- LIGHTBOX LOGIC ---
        let currentDayIdx = 0;
        let currentImgIdx = 0;
        const modal = document.getElementById('photoModal');
        const lightboxImg = document.getElementById('lightbox-img');
        const lightboxCap = document.getElementById('lightbox-caption');

        window.openLightbox = function(dayIdx, imgIdx, event) {
            event.stopPropagation(); // Don't trigger card click
            currentDayIdx = dayIdx;
            currentImgIdx = imgIdx;
            updateLightbox();
            modal.style.display = 'flex';
        };

        function updateLightbox() {
            const gallery = tripData[currentDayIdx].gallery;
            const data = gallery[currentImgIdx];
            lightboxImg.src = data.src;
            lightboxCap.innerText = `${data.cap} (${currentImgIdx + 1}/${gallery.length})`;
        }

        window.moveSlide = function(step) {
            const gallery = tripData[currentDayIdx].gallery;
            currentImgIdx = (currentImgIdx + step + gallery.length) % gallery.length; // Loop around
            updateLightbox();
        };

        window.closeModal = function() {
            modal.style.display = 'none';
        };

        // Close on background click
        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeModal();
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (modal.style.display === 'flex') {
                if (e.key === 'ArrowLeft') moveSlide(-1);
                if (e.key === 'ArrowRight') moveSlide(1);
                if (e.key === 'Escape') closeModal();
            }
        });

    </script>
</body>
</html>
